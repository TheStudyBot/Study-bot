const subjects = {
    "Mechanics": {
        "Chapter 1": {
            "pdf": "/path/to/mechanics/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/mechanics/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/mechanics/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/mechanics/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/mechanics/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/mechanics/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    },
    "Physics": {
        "Chapter 1": {
            "pdf": "/path/to/physics/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/physics/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/physics/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/physics/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/physics/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/physics/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    },
    "SME": {
        "Chapter 1": {
            "pdf": "/path/to/sme/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/sme/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/sme/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/sme/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/sme/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/sme/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    },
    "M1": {
        "Chapter 1": {
            "pdf": "/path/to/m1/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/m1/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/m1/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/m1/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/m1/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/m1/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    },
    "M2": {
        "Chapter 1": {
            "pdf": "/path/to/m2/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/m2/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/m2/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/m2/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/m2/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/m2/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    },
    "BEE": {
        "Chapter 1": {
            "pdf": "/path/to/bee/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/bee/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/bee/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/bee/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/bee/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/bee/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    },
    "BXE": {
        "Chapter 1": {
            "pdf": "/path/to/bxe/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/bxe/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/bxe/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/bxe/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/bxe/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/bxe/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    },
    "Graphics": {
        "Chapter 1": {
            "pdf": "/path/to/graphics/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/graphics/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/graphics/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/graphics/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/graphics/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/graphics/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    },
    "Chemistry": {
        "Chapter 1": {
            "pdf": "/path/to/chemistry/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/chemistry/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/chemistry/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/chemistry/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/chemistry/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/chemistry/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    },
    "PPS": {
        "Chapter 1": {
            "pdf": "/path/to/pps/chapter_1_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_1"
        },
        "Chapter 2": {
            "pdf": "/path/to/pps/chapter_2_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_2"
        },
        "Chapter 3": {
            "pdf": "/path/to/pps/chapter_3_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_3"
        },
        "Chapter 4": {
            "pdf": "/path/to/pps/chapter_4_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_4"
        },
        "Chapter 5": {
            "pdf": "/path/to/pps/chapter_5_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_5"
        },
        "Chapter 6": {
            "pdf": "/path/to/pps/chapter_6_notes.pdf",
            "video": "https://www.youtube.com/embed/VIDEO_ID_6"
        }
    }
};

    // Add more subjects here


let selectedSubject = "";
let selectedChapter = "";

function sendMessage(message, sender) {
    var chatBox = document.getElementById("chat-box");

    // Create a message container
    var messageContainer = document.createElement("div");
    messageContainer.classList.add("chat-message-container");

    // Display sender's message
    var messageElement = document.createElement("div");
    messageElement.innerHTML = message;
    messageElement.classList.add("chat-message", sender);
    messageContainer.appendChild(messageElement);

    // Display message container in the chat box
    chatBox.appendChild(messageContainer);

    // Scroll to bottom of chat box
    chatBox.scrollTop = chatBox.scrollHeight;

    // Clear user input
    document.getElementById("user-input").value = "";

    // Set focus on the chat input
    document.getElementById("user-input").focus();
}

function displayStudyMaterials() {
    const subjectData = subjects[selectedSubject][selectedChapter];
    if (subjectData) {
        sendMessage("Here are the study materials for " + selectedChapter + " in " + selectedSubject + ":", "bot");
        sendMessage("Download the written notes: <a href='" + subjectData.pdf + "' download>Download PDF</a>", "bot");
        sendMessage("Check out the video lectures for " + selectedChapter + ": <a href='" + subjectData.video + "' target='_blank'>Watch Video Lectures</a>", "bot");
    } else {
        sendMessage("Sorry, study materials for " + selectedChapter + " in " + selectedSubject + " are not available.", "bot");
    }
    selectedSubject = "";
    selectedChapter = "";
    displayWelcomeMessage();
}

function displayWelcomeMessage() {
    var welcomeMessage = "Welcome to Rancho The Bot! Please select a subject from the following list:";
    welcomeMessage += "<ol>";
    for (var subject in subjects) {
        welcomeMessage += "<li>" + subject + "</li>";
    }
    welcomeMessage += "</ol>";
    sendMessage(welcomeMessage, "bot");
}

function processUserInput(userInput) {
    userInput = userInput.toLowerCase();

    if (selectedSubject && selectedChapter) {
        if (userInput.includes("bye") || userInput.includes("thanks")) {
            sendMessage("Happy to help. Let me know if there is anything else I can help you with.", "bot");
            selectedSubject = "";
            selectedChapter = "";
            return;
        } else {
            displayStudyMaterials();
            return;
        }
    }

    if (selectedSubject) {
        // Check if user input is a number corresponding to a chapter
        var selectedChapterIndex = parseInt(userInput);
        if (!isNaN(selectedChapterIndex) && selectedChapterIndex > 0 && selectedChapterIndex <= Object.keys(subjects[selectedSubject]).length) {
            var chapters = Object.keys(subjects[selectedSubject]);
            selectedChapter = chapters[selectedChapterIndex - 1];
            sendMessage("You've selected " + selectedChapter + ". Please wait while we fetch the study materials...", "bot");
            setTimeout(displayStudyMaterials, 1000); // Display study materials after a short delay
            return;
        }
    }

    // Check if user input matches subjects
    for (var subject in subjects) {
        if (userInput.includes(subject.toLowerCase())) {
            selectedSubject = subject;
            sendMessage("Great! You've selected " + subject + ". Here are the chapters:", "bot");
            // Display chapters
            var chapters = Object.keys(subjects[subject]);
            chapters.forEach(function(chapter, index) {
                sendMessage((index + 1) + ". " + chapter, "bot");
            });

            // Provide instructions to select chapter
            sendMessage("Please enter the number of the chapter you want to select.", "bot");
            return;
        }
    }

    // Check for greetings
    if (userInput.includes("hello") || userInput.includes("hi")) {
        sendMessage("Hello! How can I assist you today?", "bot");
        return;
    }

    // Check for farewells
    if (userInput.includes("bye") || userInput.includes("thanks")) {
        sendMessage("Happy to help. Let me know if there is anything else I can help you with.", "bot");
        return;
    }

    // If no subject match found, display list of subjects
    displayWelcomeMessage(); // Display welcome message again
}

// Display welcome message initially
displayWelcomeMessage();

// Trigger processUserInput function when Enter key is pressed in the chat box
document.getElementById("user-input").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
        var userInput = document.getElementById("user-input").value;
        sendMessage(userInput, "user");
        processUserInput(userInput);
    }
});
