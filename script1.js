const subjects = {
    "Mechanics": {
        "U-1: Resolution and Composition of Forces": {
            "pdf": ["/path/to/mechanics/chapter_1_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_1"]
        },
        "U-2: Distributed Forces and Friction": {
            "pdf": ["/path/to/mechanics/chapter_2_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_2"]
        },
        "U-3: Equilibrium": {
            "pdf": ["/path/to/mechanics/chapter_3_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_3"]
        },
        "U-4: Analysis of Structures": {
            "pdf": ["/path/to/mechanics/chapter_4_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_4"]
        },
        "U-5: Kinematics of Particle": {
            "pdf": ["/path/to/mechanics/chapter_5_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_5"]
        },
        "U-6: Kinetics of Particle": {
            "pdf": ["/path/to/mechanics/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
        // Add other chapters here
    }, 
	"Physics": {
        "U-1: Wave Optics": {
            "pdf": ["/path/to/physics/chapter_1_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_1"]
        },
        "U-2: Laser and Optic Fibre": {
            "pdf": ["/path/to/physics/chapter_2_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_2"]
        },
        "U-3: Quantum Mechanics": {
            "pdf": ["/path/to/physics/chapter_3_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_3"]
        },
        "U-4: Semiconductor Physics": {
            "pdf": ["PDFs/unit-4-PHY-notes.pdf"],
            "video": ["https://youtube.com/playlist?list=PLQzUXa8lZVq8lfZN5836sohUpRCt2b6oB&si=MZ7pesmEgM-70w3f"]
        },
        "U-5: Magnetism and Superconductivity": {
            "pdf": ["/path/to/physics/chapter_5_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_5"]
        },
        "U-6: Non Destructive Testing and Nanotechnology": {
            "pdf": ["/path/to/physics/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
    },
    "SME": {
        "U-1: Introduction of Energy Sources & its Conversion": {
            "pdf": ["/path/to/sme/chapter_1_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_1"]
        },
        "U-2: Introduction to Thermal Engineering": {
            "pdf": ["/path/to/sme/chapter_2_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_2"]
        },
        "U-3 Vehicles and their Specifications": {
            "pdf": ["/path/to/sme/chapter_3_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_3"]
        },
        "U-4: Vehicle Systems": {
            "pdf": ["/path/to/sme/chapter_4_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_4"]
        },
        "U-5: Introduction to Manufacturing": {
            "pdf": ["/path/to/sme/chapter_5_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_5"]
        },
        "U-6: Engineering Mechanisms and their Application in Domestic Appliances": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
    },
    "M1": {
        "U-1: Differential Calculus": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-2: Fourier Series": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-3: Partial Differentiation": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-4: Applications of Partial Differentiation": {
           "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
           "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-5: Linear Algebra-Matrices, System of Linear Equations": {
          "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
          "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-6: Linear Algebra-Eigen Values and Eigen Vectors, Diagonaliztion": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
    },
    "M2": {
        "U-1: First Order Ordinary differential Equations": {
           "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-2: Applications of Differential Equations": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-3: Integral Calculus": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-4: Curve Tracing": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-5: Solid Geometry": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-6: Multiple Integrals and their Applications": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
    },
    "BEE": {
        "U-1: Electromagnetism": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-2: Electrostatics and AC Fundamentals": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-3: Single Phase AC Circuits": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-4: Polyphase A.C. Circuits and Single phase Transformers": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-5: DC Circuits": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-6: Work, Power, Energy and Batteries": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
    },
    "BXE": {
        "U-1: Introduction to Electronics": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-2: Transistor and OPAMP": {
           "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-3: Number System and Logic Gates": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-4: Electronic Instrumentation": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-5: Sensors": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-6: Communication Systems": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
    },
    "Graphics": {
        "U-1: Fundamentals of Engineering Drawing": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-2: Introduction to 2D and 3D computer aided drafting packages": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-3: Engineering Curves": {
           "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-4: Orthographic Projection": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-5: Isometric Projection ": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-6: Development of Lateral Surfaces": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
    },
    "Chemistry": {
        "U-1: Water Technology": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-2: Instrumental Methods of Analysis": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-3: Engineering Materials": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-4: Fuels": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-5: Spectroscopic Techniques": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-6: Corrosion Science": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
    },
    "PPS": {
        "U-1: Problem Solving, Programming and Python Programming": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-2: Decision Control Statements": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-2: Functions and Modules": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-3: Strings": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-5: Object Oriented Programming": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        },
        "U-6: File Handling and Dictionaries": {
            "pdf": ["/path/to/sme/chapter_6_notes.pdf"],
            "video": ["https://www.youtube.com/embed/VIDEO_ID_6"]
        }
    }
    // Add other subjects here
};

let selectedSubject = "";
let selectedChapter = "";

function sendMessage(message, sender) {
    var chatBox = document.getElementById("chat-box");

    var messageContainer = document.createElement("div");
    messageContainer.classList.add("chat-message-container");

    var messageElement = document.createElement("div");
    messageElement.innerHTML = message;
    messageElement.classList.add("chat-message", sender);
    messageContainer.appendChild(messageElement);

    chatBox.appendChild(messageContainer);
    chatBox.scrollTop = chatBox.scrollHeight;

    document.getElementById("user-input").value = "";
    document.getElementById("user-input").focus();
}

function displayStudyMaterials() {
    const subjectData = subjects[selectedSubject][selectedChapter];
    if (subjectData) {
        sendMessage("Here are the study materials for " + selectedChapter + " in " + selectedSubject + ":", "bot");

        // Display PDF links
        sendMessage("Download the written notes:");
        for (let i = 0; i < subjectData.pdf.length; i++) {
            sendMessage("<a href='" + subjectData.pdf[i] + "' download>Download PDF " + (i + 1) + "</a>", "bot");
        }

        // Display video links
        sendMessage("Check out the video lectures for " + selectedChapter + ":");
        for (let i = 0; i < subjectData.video.length; i++) {
            sendMessage("<a href='" + subjectData.video[i] + "' target='_blank'>Watch Video Lectures " + (i + 1) + "</a>", "bot");
        }
    } else {
        sendMessage("Sorry, study materials for " + selectedChapter + " in " + selectedSubject + " are not available.", "bot");
    }
    selectedSubject = "";
    selectedChapter = "";
    displayWelcomeMessage();
}


function displayWelcomeMessage() {
    var welcomeMessage = "Welcome to Rancho The Bot! Please select a subject from the following list:";
    welcomeMessage += "<ol>";
    for (var subject in subjects) {
        welcomeMessage += "<li>" + subject + "</li>";
    }
    welcomeMessage += "</ol>";
    sendMessage(welcomeMessage, "bot");
}

function processUserInput(userInput) {
    userInput = userInput.toLowerCase();

    if (selectedSubject && selectedChapter) {
        if (userInput.includes("bye") || userInput.includes("thanks")) {
            sendMessage("Happy to help. Let me know if there is anything else I can help you with.", "bot");
            selectedSubject = "";
            selectedChapter = "";
            return;
        } else {
            displayStudyMaterials();
            return;
        }
    }

    if (selectedSubject) {
        var selectedChapterIndex = parseInt(userInput);
        if (!isNaN(selectedChapterIndex) && selectedChapterIndex > 0 && selectedChapterIndex <= Object.keys(subjects[selectedSubject]).length) {
            var chapters = Object.keys(subjects[selectedSubject]);
            selectedChapter = chapters[selectedChapterIndex - 1];
            sendMessage("You've selected " + selectedChapter + ". Please wait while we fetch the study materials...", "bot");
            setTimeout(displayStudyMaterials, 1000); 
            return;
        }
    }

    for (var subject in subjects) {
        if (userInput.includes(subject.toLowerCase())) {
            selectedSubject = subject;
            sendMessage("Great! You've selected " + subject + ". Here are the chapters:", "bot");
            var chapters = Object.keys(subjects[subject]);
            chapters.forEach(function(chapter, index) {
                sendMessage(chapter, "bot");
            });
            sendMessage("Please enter the number of the chapter you want to select.", "bot");
            return;
        }
    }

    if (userInput.includes("hello") || userInput.includes("hi")) {
        sendMessage("Hello! How can I assist you today?", "bot");
        return;
    }

    if (userInput.includes("bye") || userInput.includes("thanks")) {
        sendMessage("Happy to help. Let me know if there is anything else I can help you with.", "bot");
        return;
    }

    displayWelcomeMessage(); 
}

displayWelcomeMessage();

document.getElementById("user-input").addEventListener("keypress", function(event) {
    if (event.key === "Enter") {
        var userInput = document.getElementById("user-input").value;
        sendMessage(userInput, "user");
        processUserInput(userInput);
    }
});
